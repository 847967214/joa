				#include("/common/include/pageTitleBread.html")
				
                <div id="page-content">
                	<div class="col-sm-12 eq-box-sm">
			        	<div class="panel lion-fullHeight">
						    		<div class="panel-body">
											<div class="bootstrap-table">
												<div class="fixed-table-toolbar">
													<div class="bars pull-left form-group">
														表名：<select id="selectTable" class="selectpicker" onchange="changeTable()">
							                                #for(t:tableList)
							                                	<option value="#(t.table_name)">#(t.table_name)</option>
							                                #end
							                            </select>
														<a class="btn btn-info data-toolbar" onclick="doGenerate()" href="javascript:void(0);"><i class="demo-pli-add"></i>代码生成</a>
													</div>
												</div>
												<div class="fixed-table-container" style="padding-bottom: 0px;">
													<div class="fixed-table-body">
																<table id="treetable" class="demo-add-niftycheck table table-hover table-striped">
																	        <thead>
																	         	<tr>
																		        	<th style="width: 220px;text-align: center;"><div class="th-inner">表名</div></th>
																					<th style="width: 70px;text-align: center;"><div class="th-inner">是否显示在列</div></th>
																					<th style="width: 70px;text-align: center;"><div class="th-inner">是否用于查询</div></th>
																					<th style="width: 100px;text-align: center;"><div class="th-inner">类型</div></th>
																					<th style="width: 100px;text-align: center;"><div class="th-inner">长度</div></th>
																					<th style="width: 200px;text-align: center;"><div class="th-inner">注释</div></th>
																		        </tr>
																	        </thead>
																	        <tbody id = "tableColumns">
																	        	<!-- 此处用来展示表的所有列信息-异步展示pjax -->
																	        </tbody>
																</table>
													</div>
												</div>
											</div>
										</div>
							</div>
						</div>
                </div>
<script>
	//换表	
	function changeTable(){
		doPjaxC(ctx+"/admin/generator/getAllCols?tableName="+$("#selectTable").val(),"#tableColumns");
	}
	//进行代码生成
	function doGenerate(){
		var result = common_ajax.ajaxFunc("/admin/generator/doGenerate",{"tableName":$("#selectTable").val()}, "json", null);
		if(result.success){
			pointLion.alertMsg(result.message, "success" , "small" , function(){});
		}else{
			pointLion.alertMsg(result.message,"danger","small",null);
		}
	}
	$(document).ready(function() {
		$(".selectpicker").selectpicker({});
		changeTable();
	});
</script>